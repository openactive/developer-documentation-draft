# API flow overview

1. Select&#x20;
   * The Broker generates an Order UUID whci
2. Identify
3. Book and Pay



* The [Broker](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-broker) generates an [Order UUID](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-order-uuid), which is used to uniquely identify the `OrderQuote` / `Order` throughout the booking process.
* After "**1. Select**" the [Broker](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-broker) calls the [Booking System](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-booking-system) to confirm an indicative price and the availability of the selected items using an `OrderQuote`, and retrieve a total order price. Any details that the [Customer](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-customer) needs to supply to complete the booking are also specified. This is checkpoint [**C1**](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-c1) on the diagram above.
* After "**2. Identify**" the [Broker](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-broker) calls the [Booking System](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-booking-system) to reconfirm the price and availability of the selected items using an `OrderQuote`, using all personal details required, and retrieve a total order price. Explicit consent for any terms and conditions is also captured at this stage if required. This is checkpoint [**C2**](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-c2) on the diagram above.
* After "**3. Book and Pay**", the [Broker](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-broker) first _pre-authorizes_ the payment for the total order price (if required by the [Payment Provider](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-payment-provider)), then confirms the booking with the [Booking System](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-booking-system) using an `Order` ([**B**](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-b) on the diagram above), and finally _captures_ the payment. The [Broker](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-broker) then generates invoices, and sends the [Customer](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-customer) notifications.
* The [Booking System](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-booking-system) adds the `Order` to an [Orders feed](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-orders-feed) specific to the [Broker](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-broker), which the [Broker](https://openactive.io/open-booking-api/EditorsDraft/1.0CR3/#dfn-broker) reads to update its internal state, including those updates resulting from cancellations.
